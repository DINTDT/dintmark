<head>
    <link rel="stylesheet" href="dintmark.css">
    <style>
        #input{display:inline-block;border-bottom:solid 1px #666;font-family:monospace;
            width:50%;resize:none;height:100%;vertical-align:bottom;padding:1rem}
        #output{display:inline-block;background:#eee;overflow-x:clip;height:calc(100% - 4rem);width:calc(50% - 4rem);
            overflow-y:scroll;padding:2em;}
        body{margin:0;height:100vh}

        p{text-indent:2em}
    </style>
    <script src="dintmark.js"></script>
    <script>
        var i;
        var o;

        function processContent(e){
            var c=e.value;
            for(match of matches){c=c.replace(match[0],match[1]);}
            return c;
        }

        function render(){
            content=processContent(i);
            o.innerHTML=content;
            hLevels=[0,0,0,0,0,0]
            ll=6;
            for(var h of document.getElementsByClassName("heading numbered")){
                var l=parseInt(h.tagName.substring(1));
                if(l<ll){for(var li=l;li<6;li++){hLevels[li]=0}}
                ll=l;
                hLevels[l-1]+=1;
                h.innerHTML=hLevels.join(". ").substring(0,l*3)+h.innerHTML;}
        }

        window.onload=()=>{
            i=document.getElementById("input")
            o=document.getElementById("output")
            i.oninput=()=>{
                render()
            }
        }
    </script>
</head>
<body>
    <textarea id="input"></textarea><div id="output"></div>
</body>